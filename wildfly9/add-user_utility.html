<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>user utility - WildFly 9</title>

    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="X-UA-Compatible" content="IE=EmulateIE8" />
    <meta content="Scroll Wiki Publisher" name="generator"/>

    <link type="text/css" rel="stylesheet" href="css/blueprint/liquid.css" media="screen, projection"/>
    <link type="text/css" rel="stylesheet" href="css/blueprint/print.css" media="print"/>
    <!--[if lt IE 8]><link rel="stylesheet" href="css/blueprint/ie.css" type="text/css" media="screen, projection"/><![endif]-->

    <link type="text/css" rel="stylesheet" href="css/content-style.css" media="screen, projection, print"/>
    <link type="text/css" rel="stylesheet" href="css/screen.css" media="screen, projection"/>
    <link type="text/css" rel="stylesheet" href="css/print.css" media="print"/>
    
    <link type="text/css" rel="stylesheet" href="css/jbossorg.css"/>
    <link type="text/css" rel="stylesheet" href="css/docnav.css"/>    
    
    <link type="text/css" rel="stylesheet" href="sh/shCore.css"/>
    <link type="text/css" rel="stylesheet" href="sh/shCoreDefault.css"/>
    <script type="text/javascript" src="sh/shCore.js"></script>
    <script type="text/javascript" src="sh/shBrushAppleScript.js"></script>
    <script type="text/javascript" src="sh/shBrushAS3.js"></script>
    <script type="text/javascript" src="sh/shBrushBash.js"></script>
    <script type="text/javascript" src="sh/shBrushCpp.js"></script>
    <script type="text/javascript" src="sh/shBrushCSharp.js"></script>
    <script type="text/javascript" src="sh/shBrushCss.js"></script>
    <script type="text/javascript" src="sh/shBrushDiff.js"></script>
    <script type="text/javascript" src="sh/shBrushErlang.js"></script>
    <script type="text/javascript" src="sh/shBrushGroovy.js"></script>
    <script type="text/javascript" src="sh/shBrushJava.js"></script>
    <script type="text/javascript" src="sh/shBrushJavaFX.js"></script>
    <script type="text/javascript" src="sh/shBrushJScript.js"></script>
    <script type="text/javascript" src="sh/shBrushPerl.js"></script>
    <script type="text/javascript" src="sh/shBrushPhp.js"></script>
    <script type="text/javascript" src="sh/shBrushPlain.js"></script>
    <script type="text/javascript" src="sh/shBrushPython.js"></script>
    <script type="text/javascript" src="sh/shBrushRuby.js"></script>
    <script type="text/javascript" src="sh/shBrushScala.js"></script>
    <script type="text/javascript" src="sh/shBrushSql.js"></script>
    <script type="text/javascript" src="sh/shBrushVb.js"></script>
    <script type="text/javascript" src="sh/shBrushXml.js"></script>
    
</head>
<body>
    <div class="container" style="min-width: 760px;">
        <div class="block header">
          <p id="title">
            <a class="site_href" href="http://www.jboss.org"><strong>JBoss.org</strong></a>
            <a class="doc_href" href="http://docs.jboss.org"><strong>Community Documentation</strong></a>
          </p>
                  <ul class="docnav">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li class="previous"><a accesskey="p" href="Security_Realms.html"><strong>Prev</strong></a></li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          <li class="next"><a accesskey="n" href="Detailed_Configuration.html"><strong>Next</strong></a></li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  </ul>
                    <div>
            <h1>user utility</h1>
          </div>          
          </div>

        <div class="block content">
    <p>
For use with the default configuration we supply a utility <tt class=" ">add-user</tt> which can be used to manage the properties files for the default realms used to store the users and their roles.    </p>
    <p>
The add-user utility can be used to manage both the users in the <tt class=" ">ManagementRealm</tt> and the users in the <tt class=" ">ApplicationRealm</tt>, changes made apply to the properties file used both for domain mode and standalone mode.    </p>
    <div class="confbox admonition admonition-tip">
        
    <p>
After you have installed your application server and decided if you are going to run in standalone mode or domain mode you can delete the parent folder for the mode you are not using, the add-user utility will then only be managing the properties file for the mode in use.    </p>
    </div>
    
    <p>
The add-user utility is a command line utility however it can be run in both interactive and non-interactive mode.  Depending on your platform the script to run the add-user utility is either <tt class=" ">add-user.sh</tt> or <tt class=" ">add-user.bat</tt> which can be found in {<tt class=" ">jboss.home}/bin</tt>.    </p>
    <p>
This guide now contains a couple of examples of this utility in use to accomplish the most common tasks.    </p>
    <div class="section-2"  id="80873171_add-userutility-AddingaUser"  >
        <h2>Adding a User</h2>
    
    <p>
Adding users to the properties files is the primary purpose of this utility.    </p>
    <div class="confbox admonition admonition-note">
        
    <p>
The server caches the contents of the properties files in memory, however the server does check the modified time of the properties files on each authentication request and re-load if the time has been updated - this means all changes made by this utility are immediately applied to any running server.    </p>
    </div>
    
    <div class="section-3"  id="80873171_add-userutility-AManagementUser"  >
        <h3>A Management User</h3>
    
    <div class="confbox admonition admonition-note">
        
    <p>
The default name of the realm for management users is <tt class=" ">ManagementRealm</tt>, when the utility prompts for the realm name just accept the default unless you have switched to a different realm.    </p>
    </div>
    
    <div class="section-4"  id="80873171_add-userutility-InteractiveMode"  >
        <h4>Interactive Mode</h4>
    
    <p>
    <img src="images/author/download/attachments/80873171/add-mgmt-user-interactive.png" alt="images/author/download/attachments/80873171/add-mgmt-user-interactive.png" />
        </p>
    <p>
Here we have added a new Management User called <tt class=" ">adminUser</tt>, as you can see some of the questions offer default responses so you can just press enter without repeating the default value.    </p>
    <p>
For now just answer <tt class=" ">n</tt> or <tt class=" ">no</tt> to the final question, adding users to be used by processes is described in more detail in the domain management chapter.    </p>
    </div>
    
    <div class="section-4"  id="80873171_add-userutility-NonInteractiveMode"  >
        <h4>Interactive Mode</h4>
    
    <p>
To add a user in non-interactive mode the command <tt class=" ">./add-user.sh {username} {password</tt>} can be used.    </p>
    <p>
    <img src="images/author/download/attachments/80873171/add-mgmt-user-non-interactive.png" alt="images/author/download/attachments/80873171/add-mgmt-user-non-interactive.png" />
        </p>
    <div class="confbox admonition admonition-warning">
        
    <p>
If you add users using this approach there is a risk that any other user that can view the list of running process may see the arguments including the password of the user being added, there is also the risk that the username / password combination will be cached in the history file of the shell you are currently using.    </p>
    </div>
    
    </div>
    
    </div>
    
    <div class="section-3"  id="80873171_add-userutility-AnApplicationUser"  >
        <h3>An Application User</h3>
    
    <p>
When adding application users in addition to adding the user with their pre-hashed password it is also now possible to define the roles of the user.    </p>
    <div class="section-4"  id="80873171_add-userutility-InteractiveMode2"  >
        <h4>Interactive Mode</h4>
    
    <p>
    <img src="images/author/download/attachments/80873171/add-app-user-interactive.png" alt="images/author/download/attachments/80873171/add-app-user-interactive.png" />
        </p>
    <p>
Here a new user called <tt class=" ">appUser</tt> has been added, in this case a comma separated list of roles has also been specified.    </p>
    <p>
As with adding a management user just answer <tt class=" ">n</tt> or <tt class=" ">no</tt> to the final question until you know you are adding a user that will be establishing a connection from one server to another.    </p>
    </div>
    
    <div class="section-4"  id="80873171_add-userutility-NonInteractiveMode2"  >
        <h4>Interactive Mode</h4>
    
    <p>
To add an application user non-interactively use the command <tt class=" ">./add-user.sh -a {username} {password</tt>}.    </p>
    <p>
    <img src="images/author/download/attachments/80873171/add-app-user-non-interactive.png" alt="images/author/download/attachments/80873171/add-app-user-non-interactive.png" />
        </p>
    <div class="confbox admonition admonition-note">
        
    <p>
Non-interactive mode does not support defining a list of users, to associate a user with a set of roles you will need to manually edit the <tt class=" ">application-roles.properties</tt> file by hand.    </p>
    </div>
    
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="80873171_add-userutility-UpdatingaUser"  >
        <h2>Updating a User</h2>
    
    <p>
Within the add-user utility it is also possible to update existing users, in interactive mode you will be prompted to confirm if this is your intention.    </p>
    <div class="section-3"  id="80873171_add-userutility-AManagementUser2"  >
        <h3>A Management User</h3>
    
    <div class="section-4"  id="80873171_add-userutility-InteractiveMode3"  >
        <h4>Interactive Mode</h4>
    
    <p>
    <img src="images/author/download/attachments/80873171/update-mgmt-user-interactive.png" alt="images/author/download/attachments/80873171/update-mgmt-user-interactive.png" />
        </p>
    </div>
    
    <div class="section-4"  id="80873171_add-userutility-NonInteractiveMode3"  >
        <h4>Interactive Mode</h4>
    
    <p>
In non-interactive mode if a user already exists the update is automatic with no confirmation prompt.    </p>
    </div>
    
    </div>
    
    <div class="section-3"  id="80873171_add-userutility-AnApplicationUser2"  >
        <h3>An Application User</h3>
    
    <div class="section-4"  id="80873171_add-userutility-InteractiveMode4"  >
        <h4>Interactive Mode</h4>
    
    <p>
    <img src="images/author/download/attachments/80873171/update-app-user-interactive.png" alt="images/author/download/attachments/80873171/update-app-user-interactive.png" />
        </p>
    <div class="confbox admonition admonition-note">
        
    <p>
On updating a user with roles you will need to re-enter the list of roles assigned to the user.    </p>
    </div>
    
    </div>
    
    <div class="section-4"  id="80873171_add-userutility-NonInteractiveMode4"  >
        <h4>Interactive Mode</h4>
    
    <p>
In non-interactive mode if a user already exists the update is automatic with no confirmation prompt.    </p>
    </div>
    
    </div>
    
    </div>
    
    <div class="section-2"  id="80873171_add-userutility-CommunityContributions"  >
        <h2>Community Contributions</h2>
    
    <p>
There are still a few features to add to the add-user utility such as removing users or adding application users with roles in non-interactive mode, if you are interested in contributing to WildFly development the add-user utility is a good place to start as it is a stand alone utility, however it is a part of the AS build so you can become familiar with the AS development processes without needing to delve straight into the internals of the application server.    </p>
    </div>
    
        </div>
              <ul class="docnav">
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  <li class="previous"><a accesskey="p" href="Security_Realms.html"><strong>Prev</strong>Security Realms</a></li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              <li class="up"><a accesskey="u" href="#"><strong>Top of page</strong></a></li>
          <li class="home"><a accesskey="h" href="Documentation.html"><strong>Front page</strong></a></li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    <li class="next"><a accesskey="n" href="Detailed_Configuration.html"><strong>Next</strong>Detailed Configuration</a></li>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </ul>
          </div>
    <script type="text/javascript">
      SyntaxHighlighter.all()
    </script>
</body>
</html>
